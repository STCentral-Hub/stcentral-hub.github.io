(()=>{"use strict";class e{constructor(e){this.accordion=e,this.transitionDuration=250}toggleAccordion(){this.accordion.classList.toggle("active");const e=this.accordion.nextElementSibling;e.style.transition=`height ${this.transitionDuration}ms ease-out`,"visible"===e.style.visibility?(e.style.height="0",e.style.display="block",setTimeout(()=>{e.style.display="none",e.style.visibility="collapse"},this.transitionDuration)):(e.style.display="block",e.style.visibility="visible",e.style.height=`${e.scrollHeight}px`,setTimeout(()=>{e.style.display="flex"},this.transitionDuration))}}window.accordionOnClick=t=>new e(t).toggleAccordion()})(),(()=>{"use strict";class t{static getPrecedentMap({precedentType:e}){let n={};return"hero-gear"===e&&(n=t.#e()),n}static#e(){return{"hero-class":{precedence:600,ignoreClasses:[],override:[]},"item-type":{precedence:500,ignoreClasses:[],override:[]},"item-tier":{precedence:400,ignoreClasses:[],override:[]},"element-matches-hero":{precedence:300,ignoreClasses:[],override:[200,100]},"item-stat":{precedence:200,ignoreClasses:[],override:[]},element:{precedence:100,ignoreClasses:["no-element","no-spirit","has-matching-affinity"],override:[]},spirit:{precedence:100,ignoreClasses:["no-element","no-spirit","has-matching-affinity"],override:[]}}}}const n=t;class e{static optionGroupClass="js-filter-option-group";static optionGroupPrefix="js-filter-precedent-type-";static optionClass="js-filter-option";static optionPrefix="js-filter-precedent-";constructor({document:e,filterPrecedence:t=n,type:s}){this.document=e,this.filterVisibleClass="js-autocomplete-display-row",this.filterCollapsedClass="js-autocomplete-collapse-row",this.precedenceMap=t.getPrecedentMap({precedentType:s}),this.toggledFilterIds={}}handleOptionClick({element:e}){this.toggledFilterIds={changed:new Set,unchanged:new Set},this.#t({element:e}),this.#s({element:e}),this.#n()}#r({element:e}){e.classList.add(this.filterCollapsedClass),e.classList.remove(this.filterVisibleClass)}#l({element:e}){e.classList.add(this.filterVisibleClass),e.classList.remove(this.filterCollapsedClass)}#t({element:t}){if("radio"===t.type){let n=!0;const s=this.document.getElementsByClassName(e.optionGroupClass);for(let o=0;o<s.length;o++){const a=s[o],r=this.#i({element:t}).precedence,i=a.getElementsByClassName(e.optionClass);for(let e=0;e<i.length;e++){const s=i[e];r>this.#i({element:s}).precedence&&t.id!==s.id&&s.checked&&(n=!1)}}n&&(t.checked=!1)}}#s({element:t}){const n=this.#i({element:t});this.#c({changed:!0,element:t,precedence:n});const s=this.document.getElementsByClassName(e.optionGroupClass);for(let o=0;o<s.length;o++){const i=s[o].getElementsByClassName(e.optionClass);for(let o=0;o<i.length;o++){const e=i[o],s=this.#i({element:e});t.id!==e.id&&("radio"===t.type&&n.precedence>=s.precedence?(e.checked=!t.checked,this.#c({changed:!0,element:e,precedence:s})):"radio"===e.type&&n.precedence<s.precedence?(e.checked=!1,this.#c({changed:!0,element:e,precedence:s})):this.#c({changed:!1,element:e,precedence:s}))}}}#n(){const t=Array.from(this.toggledFilterIds.changed.values()),n=Array.from(this.toggledFilterIds.unchanged.values());t.forEach(s=>{const o=this.document.getElementsByClassName(s.key);for(let s=0;s<o.length;s++){const i=o[s].parentElement;let a={};const r=i.children;for(let s=0;s<r.length;s++){const o=r[s];a=Array.from(o.classList).reduce((s,o)=>e.#d({changedFilters:t,cls:o,result:s,unchangedFilters:n}),a)}e.#a({precedenceState:a})?this.#l({element:i}):this.#r({element:i})}})}#c({element:t,changed:n,precedence:s}){const o={checked:t.checked,key:e.#o({elementId:t.id}),precedence:s};n?this.toggledFilterIds.changed.add(o):this.toggledFilterIds.unchanged.add(o)}#i({element:t}){const n=Array.from(t.classList).find(t=>t.startsWith(e.optionPrefix)).replace(e.optionPrefix,"");return this.precedenceMap[n]}static#o({elementId:e}){return e.replace(/^(?:\w+-)+option-/u,"")}static#d({result:e,cls:t,changedFilters:n,unchangedFilters:s}){const o=n.find(e=>e.key===t),i=s.find(e=>e.key===t);if(o||i){const a=o?o.checked:i.checked,{precedence:n,ignoreClasses:r,override:s}=o?o.precedence:i.precedence;return e[n]||(e[n]={},e[n].classes={disabled:new Set,enabled:new Set},e[n].ignoreClasses=new Set),i&&r.filter(e=>e===t).forEach(t=>e[n].ignoreClasses.add(t)),a?(e[n].classes.enabled.add(t),s.forEach(t=>{e[t]||(e[t]={},e[t].classes={disabled:new Set,enabled:new Set},e[t].ignoreClasses=new Set),e[t].isOverridden=!0})):(e[n].classes.disabled.add(t),s.length>0&&(e[n].skipOverride=!0)),e}return e}static#a({precedenceState:e}){return Object.keys(e).sort().reverse().reduce((t,n)=>{if(!1===t)return t;const s=e[n];if(s.isOverridden||s.skipOverride)return t;const o=s.classes.enabled;if(0===o.size)return!1;const i=s.classes.disabled,a=s.ignoreClasses,r=Array.from(o).filter(e=>a.has(e));if(o.size===r.length&&i.size>0){const e=Array.from(i).filter(e=>a.has(e));if(i.size!==e.length)return!1}return t},!0)}}const s=new e({document:window.document,type:"hero-gear"});window.autocompleteOptionOnClick=(e,t)=>s.handleOptionClick({element:e,parentClassKey:t})})(),(()=>{"use strict";class e{constructor(e){this.slot=e,this.transitionDuration=250}toggleSlotDetails(){const i=document.getElementsByClassName("hero-equipment-slot");let e=null,t=null,n=null,s=null;for(const o of i)o.style.transition=[`border-radius ${this.transitionDuration}ms ease-in-out`,`border-bottom-color ${this.transitionDuration}ms ease-in-out`].join(", "),o.id===this.slot.id?(e=this.#t(o),e&&(t=e.parentElement,e.style.transition=`max-height ${this.transitionDuration}ms ease-out`,t&&(t.style.transition=`max-height ${this.transitionDuration}ms ease-out`))):[n,s]=this.#s(o);const o=this.slot.classList.contains("active-slot");o?(n&&(n.style.maxHeight="0"),s&&(s.style.maxHeight="0"),setTimeout(()=>{n&&(n.innerHTML="",n.classList.remove("active-slot-details")),s&&s.classList.remove("active-slot-details")},this.transitionDuration),e&&t&&setTimeout(()=>{e.innerHTML=this.slot.title.split(`
`).map(e=>`<p class="st-text-outline-p no-margin">${e}</p>`).join(""),e.classList.add("active-slot-details"),t.classList.add("active-slot-details"),e.style.maxHeight=`${e.scrollHeight}px`,t.style.maxHeight=`${t.scrollHeight+e.scrollHeight}px`},this.transitionDuration)):(e&&(e.style.maxHeight="0"),t&&(t.style.maxHeight="0"),setTimeout(()=>{!o&&e&&(e.innerHTML="",e.classList.remove("active-slot-details")),!o&&t&&t.classList.remove("active-slot-details")},this.transitionDuration))}#s(e){e.classList.remove("active-slot");let t=null,n=null;const s=document.getElementsByClassName("hero-equipment-slot-details-wrapper");for(const o of s){let e=!1;const i=o.children;for(const n of i)e=!!e||n.classList.contains(this.slot.id),n.classList.contains("active-slot-details")&&!n.classList.contains(this.slot.id)&&(t=n);n=e?null:o}return[t,n]}#t(e){e.classList.toggle("active-slot");let t=null;const n=document.getElementsByClassName(this.slot.id);for(const s of n)s.classList!==e.classList&&(t=s);return t}}const t=new class{constructor({clipboard:e,console:t}){this.clipboard=e,this.logger=t}copyHeroSimString({sim:e}){this.clipboard.writeText(e).then(()=>{this.logger.log(`Copied the text:
${e}`)})}}({clipboard:window.navigator.clipboard,console});window.copySimString=e=>t.copyHeroSimString({sim:e}),window.heroSlotOnClick=t=>new e(t).toggleSlotDetails()})(),(()=>{"use strict";class L extends Error{}class Ss extends L{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class ks extends L{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class xs extends L{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class I extends L{}class qe extends L{constructor(e){super(`Invalid unit ${e}`)}}class d extends L{}class M extends L{constructor(){super("Zone is an abstract class")}}const e="numeric",v="short",m="long",ae={year:e,month:e,day:e},nt={year:e,month:v,day:e},js={year:e,month:v,day:e,weekday:v},it={year:e,month:m,day:e},rt={year:e,month:m,day:e,weekday:m},ut={hour:e,minute:e},pt={hour:e,minute:e,second:e},gt={hour:e,minute:e,second:e,timeZoneName:v},Ke={hour:e,minute:e,second:e,timeZoneName:m},Xt={hour:e,minute:e,hourCycle:"h23"},Jt={hour:e,minute:e,second:e,hourCycle:"h23"},un={hour:e,minute:e,second:e,hourCycle:"h23",timeZoneName:v},On={hour:e,minute:e,second:e,hourCycle:"h23",timeZoneName:m},_n={year:e,month:e,day:e,hour:e,minute:e},yn={year:e,month:e,day:e,hour:e,minute:e,second:e},jn={year:e,month:v,day:e,hour:e,minute:e},bn={year:e,month:v,day:e,hour:e,minute:e,second:e},Xn={year:e,month:v,day:e,weekday:v,hour:e,minute:e},mn={year:e,month:m,day:e,hour:e,minute:e,timeZoneName:v},Rt={year:e,month:m,day:e,hour:e,minute:e,second:e,timeZoneName:v},Lt={year:e,month:m,day:e,weekday:m,hour:e,minute:e,timeZoneName:m},Nt={year:e,month:m,day:e,weekday:m,hour:e,minute:e,second:e,timeZoneName:m};class X{get type(){throw new M}get name(){throw new M}get ianaName(){return this.name}get isUniversal(){throw new M}offsetName(){throw new M}formatOffset(){throw new M}offset(){throw new M}equals(){throw new M}get isValid(){throw new M}}let Se=null;class Ae extends X{static get instance(){return null===Se&&(Se=new Ae),Se}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Je(e,t,n)}formatOffset(e,t){return se(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let we={};const cs={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let _e={};class A extends X{static create(e){return _e[e]||(_e[e]=new A(e)),_e[e]}static resetCache(){_e={},we={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=A.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Je(e,t,n,this.name)}formatOffset(e,t){return se(this.offset(e),t)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const o=(t=this.name,we[t]||(we[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),we[t]);var t;let[i,l,d,u,c,h,m]=o.formatToParts?function(e,t){const o=e.formatToParts(t),n=[];for(let e=0;e<o.length;e++){const{type:i,value:a}=o[e],t=cs[i];"era"===i?n[t]=a:s(t)||(n[t]=parseInt(a,10))}return n}(o,n):function(e,t){const n=e.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,o,i,a,r,c,l,d]=s;return[a,o,i,r,c,l,d]}(o,n);"BC"===u&&(i=1-Math.abs(i));let a=+n;const r=a%1e3;return a-=r>=0?r:1e3+r,(pe({year:i,month:l,day:d,hour:24===c?0:c,minute:h,second:m,millisecond:0})-a)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let st={},Ne={};function Pe(e,t={}){const s=JSON.stringify([e,t]);let n=Ne[s];return n||(n=new Intl.DateTimeFormat(e,t),Ne[s]=n),n}let Be={},$e={},re=null,Wt={};function de(e,t,n,s){const o=e.listingMode();return"error"===o?null:"en"===o?n(t):s(t)}class Os{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:o,floor:i,...s}=n;if(!t||Object.keys(s).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e,t={}){const s=JSON.stringify([e,t]);let n=Be[s];return n||(n=new Intl.NumberFormat(e,t),Be[s]=n),n}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return l(this.floor?Math.floor(e):Le(e,3),this.padTo)}}class ws{constructor(e,t,n){let s;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&A.create(n).valid?(s=n,this.dt=e):(s="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const o={...this.opts};o.timeZone=o.timeZone||s,this.dtf=Pe(t,o)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class _s{constructor(e,t,n){this.opts={style:"long",...n},!t&&Qe()&&(this.rtf=function(e,t={}){const{base:i,...o}=t,s=JSON.stringify([e,o]);let n=$e[s];return n||(n=new Intl.RelativeTimeFormat(e,t),$e[s]=n),n}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n="always",s=!1){const o={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},l=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&l){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${o[e][0]}`;case-1:return n?"yesterday":`last ${o[e][0]}`;case 0:return n?"today":`this ${o[e][0]}`}}const d=Object.is(t,-0)||t<0,i=Math.abs(t),r=1===i,a=o[e],c=s?r?a[1]:a[2]||a[1]:r?o[e][0]:e;return d?`${i} ${c} ago`:`in ${i} ${c}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const es={firstDay:1,minimalDays:4,weekend:[6,7]};class i{static fromOpts(e){return i.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,s,o=!1){const a=e||c.defaultLocale,r=a||(o?"en-US":re||(re=(new Intl.DateTimeFormat).resolvedOptions().locale,re)),l=t||c.defaultNumberingSystem,d=n||c.defaultOutputCalendar,u=He(s)||c.defaultWeekSettings;return new i(r,l,d,u,a)}static resetCache(){re=null,Ne={},Be={},$e={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:s}={}){return i.create(e,t,n,s)}constructor(e,t,n,s,o){const[i,a,r]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,s;try{t=Pe(e).resolvedOptions(),s=e}catch{const o=e.substring(0,n);t=Pe(o).resolvedOptions(),s=o}const{numberingSystem:o,calendar:i}=t;return[s,o,i]}}(e);this.locale=i,this.numberingSystem=t||a||null,this.outputCalendar=n||r||null,this.weekSettings=s,this.intl=function(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?i.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,He(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return de(this,e,ct,()=>{const o=t?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=function(e){const t=[];for(let s=1;s<=12;s++){const o=n.utc(2009,s,1);t.push(e(o))}return t}(e=>this.extract(e,o,"month"))),this.monthsCache[s][e]})}weekdays(e,t=!1){return de(this,e,ht,()=>{const o=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=function(e){const t=[];for(let s=1;s<=7;s++){const o=n.utc(2016,11,13+s);t.push(e(o))}return t}(e=>this.extract(e,o,"weekday"))),this.weekdaysCache[s][e]})}meridiems(){return de(this,void 0,()=>mt,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[n.utc(2016,11,13,9),n.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return de(this,e,vt,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[n.utc(-40,1,1),n.utc(2017,1,1)].map(e=>this.extract(e,t,"era"))),this.eraCache[e]})}extract(e,t,n){const s=this.dtFormatter(e,t).formatToParts().find(e=>e.type.toLowerCase()===n);return s?s.value:null}numberFormatter(e={}){return new Os(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new ws(e,this.intl,t)}relFormatter(e={}){return new _s(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const s=JSON.stringify([e,t]);let n=st[s];return n||(n=new Intl.ListFormat(e,t),st[s]=n),n}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Ge()?function(e){let t=Wt[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,Wt[e]=t}return t}(this.locale):es}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let ze=null;class h extends X{static get utcInstance(){return null===ze&&(ze=new h(0)),ze}static instance(e){return 0===e?h.utcInstance:new h(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new h(ve(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${se(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${se(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return se(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class Rn extends X{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function S(e,t){if(s(e)||null===e)return t;if(e instanceof X)return e;if("string"==typeof e){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?Ae.instance:"utc"===n||"gmt"===n?h.utcInstance:h.parseSpecifier(n)||A.create(e)}return F(e)?h.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new Rn(e)}const Ve={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},et={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Nn=Ve.hanidec.replace(/[[|\]]/g,"").split("");let K={};function j({numberingSystem:e},t=""){const n=e||"latn";return K[n]||(K[n]={}),K[n][t]||(K[n][t]=new RegExp(`${Ve[n]}${t}`)),K[n][t]}let jt,wt=()=>Date.now(),Vt="system",$t=null,Kt=null,qt=null,Qt=60,Zt=null;class c{static get now(){return wt}static set now(e){wt=e}static set defaultZone(e){Vt=e}static get defaultZone(){return S(Vt,Ae.instance)}static get defaultLocale(){return $t}static set defaultLocale(e){$t=e}static get defaultNumberingSystem(){return Kt}static set defaultNumberingSystem(e){Kt=e}static get defaultOutputCalendar(){return qt}static set defaultOutputCalendar(e){qt=e}static get defaultWeekSettings(){return Zt}static set defaultWeekSettings(e){Zt=He(e)}static get twoDigitCutoffYear(){return Qt}static set twoDigitCutoffYear(e){Qt=e%100}static get throwOnInvalid(){return jt}static set throwOnInvalid(e){jt=e}static resetCaches(){i.resetCache(),A.resetCache(),n.resetCache(),K={}}}class g{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const an=[0,31,59,90,120,151,181,212,243,273,304,334],rn=[0,31,60,91,121,152,182,213,244,274,305,335];function p(e,t){return new g("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Me(e,t,n){const s=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const o=s.getUTCDay();return 0===o?7:o}function Dt(e,t,n){return n+(G(e)?rn:an)[t-1]}function St(e,t){const n=G(e)?rn:an,s=n.findIndex(e=>e<t);return{month:s+1,day:t-n[s]}}function De(e,t){return(e-t+7)%7+1}function ie(e,t=4,n=1){const{year:s,month:a,day:r}=e,l=Dt(s,a,r),c=De(Me(s,a,r),n);let o,i=Math.floor((l-c+14-t)/7);return i<1?(o=s-1,i=ee(o,t,n)):i>ee(s,t,n)?(o=s+1,i=1):o=s,{weekYear:o,weekNumber:i,weekday:c,...ye(e)}}function kt(e,t=4,n=1){const{weekYear:s,weekNumber:a,weekday:r}=e,c=De(Me(s,1,t),n),l=V(s);let o,i=7*a+r-c-7+t;i<1?(o=s-1,i+=V(o)):i>l?(o=s+1,i-=V(s)):o=s;const{month:d,day:u}=St(o,i);return{year:o,month:d,day:u,...ye(e)}}function ke(e){const{year:t,month:n,day:s}=e;return{year:t,ordinal:Dt(t,n,s),...ye(e)}}function xt(e){const{year:t,ordinal:n}=e,{month:s,day:o}=St(t,n);return{year:t,month:s,day:o,...ye(e)}}function Ot(e,t){if(!s(e.localWeekday)||!s(e.localWeekNumber)||!s(e.localWeekYear)){if(!s(e.weekday)||!s(e.weekNumber)||!s(e.weekYear))throw new I("Cannot mix locale-based week fields with ISO-based week fields");return s(e.localWeekday)||(e.weekday=e.localWeekday),s(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),s(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function yt(e){const t=ge(e.year),n=f(e.month,1,12),s=f(e.day,1,fe(e.year,e.month));return t?n?!s&&p("day",e.day):p("month",e.month):p("year",e.year)}function ot(e){const{hour:t,minute:n,second:s,millisecond:o}=e,i=f(t,0,23)||24===t&&0===n&&0===s&&0===o,a=f(n,0,59),r=f(s,0,59),c=f(o,0,999);return i?a?r?!c&&p("millisecond",o):p("second",s):p("minute",n):p("hour",t)}function s(e){return void 0===e}function F(e){return"number"==typeof e}function ge(e){return"number"==typeof e&&e%1==0}function Qe(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch{return!1}}function Ge(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Ye(e,t,n){if(0!==e.length)return e.reduce((e,s)=>{const o=[t(s),s];return e&&n(e[0],o[0])===e[0]?e:o},null)[1]}function Y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function He(e){if(e==null)return null;if("object"!=typeof e)throw new d("Week settings must be an object");if(!f(e.firstDay,1,7)||!f(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(e=>!f(e,1,7)))throw new d("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function f(e,t,n){return ge(e)&&e>=t&&e<=n}function l(e,t=2){let n;return n=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),n}function T(e){return s(e)||null===e||""===e?void 0:parseInt(e,10)}function R(e){return s(e)||null===e||""===e?void 0:parseFloat(e)}function We(e){if(!s(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function Le(e,t,n=!1){const s=10**t;return(n?Math.trunc:Math.round)(e*s)/s}function G(e){return e%4==0&&(e%100!=0||e%400==0)}function V(e){return G(e)?366:365}function fe(e,t){const n=(s=t-1)-12*Math.floor(s/12)+1;var s;return 2===n?G(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function pe(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Xe(e,t,n){return-De(Me(e,1,t),n)+t-1}function ee(e,t=4,n=1){const s=Xe(e,t,n),o=Xe(e+1,t,n);return(V(e)-s+o)/7}function Ze(e){return e>99?e:e>c.twoDigitCutoffYear?1900+e:2e3+e}function Je(e,t,n,s=null){const a=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(o.timeZone=s);const r={timeZoneName:t,...o},i=new Intl.DateTimeFormat(n,r).formatToParts(a).find(e=>"timezonename"===e.type.toLowerCase());return i?i.value:null}function ve(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const s=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-s:s)}function tt(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new d(`Invalid unit value ${e}`);return t}function be(e,t){const n={};for(const s in e)if(Y(e,s)){const o=e[s];if(o==null)continue;n[t(s)]=tt(o)}return n}function se(e,t){const s=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),o=e>=0?"+":"-";switch(t){case"short":return`${o}${l(s,2)}:${l(n,2)}`;case"narrow":return`${o}${s}${n>0?`:${n}`:""}`;case"techie":return`${o}${l(s,2)}${l(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function ye(e){return function(e){return["hour","minute","second","millisecond"].reduce((t,n)=>(t[n]=e[n],t),{})}(e)}const bs=["January","February","March","April","May","June","July","August","September","October","November","December"],at=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],gs=["J","F","M","A","M","J","J","A","S","O","N","D"];function ct(e){switch(e){case"narrow":return[...gs];case"short":return[...at];case"long":return[...bs];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const lt=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],dt=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],fs=["M","T","W","T","F","S","S"];function ht(e){switch(e){case"narrow":return[...fs];case"short":return[...dt];case"long":return[...lt];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const mt=["AM","PM"],ms=["Before Christ","Anno Domini"],us=["BC","AD"],ds=["B","A"];function vt(e){switch(e){case"narrow":return[...ds];case"short":return[...us];case"long":return[...ms];default:return null}}function bt(e,t){let n="";for(const s of e)s.literal?n+=s.val:n+=t(s.val);return n}const ls={D:ae,DD:nt,DDD:it,DDDD:rt,t:ut,tt:pt,ttt:gt,tttt:Ke,T:Xt,TT:Jt,TTT:un,TTTT:On,f:_n,ff:jn,fff:mn,ffff:Lt,F:yn,FF:bn,FFF:Rt,FFFF:Nt};class u{static create(e,t={}){return new u(e,t)}static parseFormat(e){let o=null,t="",n=!1;const s=[];for(let a=0;a<e.length;a++){const i=e.charAt(a);"'"===i?(t.length>0&&s.push({literal:n||/^\s+$/.test(t),val:t}),o=null,t="",n=!n):n||i===o?t+=i:(t.length>0&&s.push({literal:/^\s+$/.test(t),val:t}),t=i,o=i)}return t.length>0&&s.push({literal:n||/^\s+$/.test(t),val:t}),s}static macroTokenToFormatOpts(e){return ls[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return l(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const a="en"===this.loc.listingMode(),s=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,n=(t,n)=>this.loc.extract(e,t,n),r=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",o=(t,s)=>a?function(e,t){return ct(t)[e.month-1]}(e,t):n(s?{month:t}:{month:t,day:"numeric"},"month"),i=(t,s)=>a?function(e,t){return ht(t)[e.weekday-1]}(e,t):n(s?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),l=t=>{const n=u.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},c=t=>a?function(e,t){return vt(t)[e.year<0?0:1]}(e,t):n({era:t},"era");return bt(u.parseFormat(t),t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a?function(e){return mt[e.hour<12?0:1]}(e):n({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return s?n({day:"numeric"},"day"):this.num(e.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return i("short",!0);case"cccc":return i("long",!0);case"ccccc":return i("narrow",!0);case"EEE":return i("short",!1);case"EEEE":return i("long",!1);case"EEEEE":return i("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(e.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(e.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(e.year,6);case"G":return c("short");case"GG":return c("long");case"GGGGG":return c("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return l(t)}})}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=u.parseFormat(t),o=s.reduce((e,{literal:t,val:n})=>t?e:e.concat(n),[]);return bt(s,(e=>t=>{const s=n(t);return s?this.num(e.get(s),t.length):t})(e.shiftTo(...o.map(n).filter(e=>e))))}}const _t=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function W(...e){const t=e.reduce((e,t)=>e+t.source,"");return RegExp(`^${t}$`)}function U(...e){return t=>e.reduce(([e,n,s],o)=>{const[i,a,r]=o(t,s);return[{...e,...i},a||n,r]},[{},null,1]).slice(0,2)}function P(e,...t){if(e==null)return[null,null];for(const[s,o]of t){const n=s.exec(e);if(n)return o(n)}return[null,null]}function Ct(...e){return(t,n)=>{const o={};let s;for(s=0;s<e.length;s++)o[e[s]]=T(t[n+s]);return[o,null,n+s]}}const Et=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ee=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,At=RegExp(`${Ee.source}(?:${Et.source}?(?:\\[(${_t.source})\\])?)?`),Ce=RegExp(`(?:T${At.source})?`),rs=Ct("weekYear","weekNumber","weekDay"),is=Ct("year","ordinal"),Tt=RegExp(`${Ee.source} ?(?:${Et.source}|(${_t.source}))?`),os=RegExp(`(?: ${Tt.source})?`);function H(e,t,n){const o=e[t];return s(o)?n:T(o)}function B(e,t){return[{hours:H(e,t,0),minutes:H(e,t+1,0),seconds:H(e,t+2,0),milliseconds:We(e[t+3])},null,t+4]}function te(e,t){const n=!e[t]&&!e[t+1],s=ve(e[t+1],e[t+2]);return[{},n?null:h.instance(s),t+3]}function ne(e,t){return[{},e[t]?A.create(e[t]):null,t+1]}const ss=RegExp(`^T?${Ee.source}$`),Gn=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Qn(e){const[s,o,i,a,r,c,l,n,d]=e,u="-"===s[0],h=n&&"-"===n[0],t=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:t(R(o)),months:t(R(i)),weeks:t(R(a)),days:t(R(r)),hours:t(R(c)),minutes:t(R(l)),seconds:t(R(n),"-0"===n),milliseconds:t(We(d),h)}]}const Zn={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Fe(e,t,n,s,o,i,a){const r={year:2===t.length?Ze(T(t)):T(t),month:at.indexOf(n)+1,day:T(s),hour:T(o),minute:T(i)};return a&&(r.second=T(a)),e&&(r.weekday=e.length>3?lt.indexOf(e)+1:dt.indexOf(e)+1),r}const Yn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function qn(e){const[,r,f,c,o,i,a,s,t,l,d,u]=e,m=Fe(r,o,c,f,i,a,s);let n;return n=t?Zn[t]:l?0:ve(d,u),[m,new h(n)]}const Kn=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Un=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Wn=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Yt(e){const[,t,n,s,o,i,a,r]=e;return[Fe(t,o,s,n,i,a,r),h.utcInstance]}function $n(e){const[,t,n,s,o,i,a,r]=e;return[Fe(t,r,n,s,o,i,a),h.utcInstance]}const Vn=W(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Ce),Bn=W(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Ce),In=W(/(\d{4})-?(\d{3})/,Ce),Hn=W(At),en=U(function(e,t){return[{year:H(e,t),month:H(e,t+1,1),day:H(e,t+2,1)},null,t+3]},B,te,ne),Pn=U(rs,B,te,ne),Ln=U(is,B,te,ne),Dn=U(B,te,ne),zn=U(B),Tn=W(/(\d{4})-(\d\d)-(\d\d)/,os),Cn=W(Tt),Sn=U(B,te,ne),ln="Invalid Duration",dn={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},An={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...dn},kn={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...dn},z=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Jn=z.slice(0).reverse();function k(e,t,n=!1){const s={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new o(s)}function gn(e,t){let n=t.milliseconds??0;for(const s of Jn.slice(1))t[s]&&(n+=t[s]*e[s].milliseconds);return n}function vn(e,t){const n=gn(e,t)<0?-1:1;z.reduceRight((o,i)=>{if(s(t[i]))return o;if(o){const r=t[o]*n,s=e[i][o],a=Math.floor(r/s);t[i]+=a*n,t[o]-=a*s*n}return i},null),z.reduce((n,o)=>{if(s(t[o]))return n;if(n){const s=t[n]%1;t[n]-=s,t[o]+=s*e[n][o]}return o},null)}class o{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?kn:An;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||i.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return o.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||"object"!=typeof e)throw new d("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new o({values:be(e,o.normalizeUnit),loc:i.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(F(e))return o.fromMillis(e);if(o.isDuration(e))return e;if("object"==typeof e)return o.fromObject(e);throw new d(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=function(e){return P(e,[Gn,Qn])}(e);return n?o.fromObject(n,t):o.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=function(e){return P(e,[ss,zn])}(e);return n?o.fromObject(n,t):o.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new d("need to specify a reason the Duration is invalid");const n=e instanceof g?e:new g(e,t);if(c.throwOnInvalid)throw new xs(n);return new o({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new qe(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?u.create(this.loc,n).formatDurationFromString(this,e):ln}toHuman(e={}){if(!this.isValid)return ln;const t=z.map(t=>{const n=this.values[t];return s(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)}).filter(e=>e);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=Le(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},n.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?gn(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=o.fromDurationLike(e),n={};for(const e of z)(Y(t.values,e)||Y(this.values,e))&&(n[e]=t.get(e)+this.get(e));return k(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=o.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=tt(e(this.values[n],n));return k(this,{values:t},!0)}get(e){return this[o.normalizeUnit(e)]}set(e){return this.isValid?k(this,{values:{...this.values,...be(e,o.normalizeUnit)}}):this}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:s}={}){return k(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:s,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return vn(this.matrix,e),k(this,{values:e},!0)}rescale(){return this.isValid?k(this,{values:function(e){const t={};for(const[s,n]of Object.entries(e))0!==n&&(t[s]=n);return t}(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(...t){if(!this.isValid)return this;if(0===t.length)return this;t=t.map(e=>o.normalizeUnit(e));const n={},e={},s=this.toObject();let i;for(const o of z)if(t.indexOf(o)>=0){i=o;let t=0;for(const n in e)t+=this.matrix[n][o]*e[n],e[n]=0;F(s[o])&&(t+=s[o]);const a=Math.trunc(t);n[o]=a,e[o]=(1e3*t-1e3*a)/1e3}else F(s[o])&&(e[o]=s[o]);for(const t in e)0!==e[t]&&(n[i]+=t===i?e[t]:e[t]/this.matrix[i][t]);return vn(this.matrix,n),k(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return k(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const s of z)if(t=this.values[s],n=e.values[s],!(void 0===t||0===t?void 0===n||0===n:t===n))return!1;var t,n;return!0}}const $="Invalid Interval";class r{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new d("need to specify a reason the Interval is invalid");const n=e instanceof g?e:new g(e,t);if(c.throwOnInvalid)throw new ks(n);return new r({invalid:n})}static fromDateTimes(e,t){const n=Z(e),s=Z(t),o=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?r.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:r.invalid("missing or invalid end"):r.invalid("missing or invalid start")}(n,s);return o??new r({start:n,end:s})}static after(e,t){const s=o.fromDurationLike(t),n=Z(e);return r.fromDateTimes(n,n.plus(s))}static before(e,t){const s=o.fromDurationLike(t),n=Z(e);return r.fromDateTimes(n.minus(s),n)}static fromISO(e,t){const[s,i]=(e||"").split("/",2);if(s&&i){let e,a,c,l;try{e=n.fromISO(s,t),a=e.isValid}catch{a=!1}try{c=n.fromISO(i,t),l=c.isValid}catch{l=!1}if(a&&l)return r.fromDateTimes(e,c);if(a){{const n=o.fromISO(i,t);if(n.isValid)return r.after(e,n)}}else if(l){const e=o.fromISO(s,t);if(e.isValid)return r.before(c,e)}}return r.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const s=this.start.startOf(e,t);let n;return n=t?.useLocaleWeeks?this.end.reconfigure({locale:s.locale}):this.end,n=n.startOf(e,t),Math.floor(n.diff(s,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&this.s<=e&&this.e>e}set({start:e,end:t}={}){return this.isValid?r.fromDateTimes(e||this.s,t||this.e):this}splitAt(...s){if(!this.isValid)return[];const o=s.map(Z).filter(e=>this.contains(e)).sort((e,t)=>e.toMillis()-t.toMillis()),t=[];let{s:e}=this,n=0;for(;e<this.e;){const s=o[n]||this.e,i=+s>+this.e?this.e:s;t.push(r.fromDateTimes(e,i)),e=i,n+=1}return t}splitBy(e){const t=o.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s}=this,i=1;const a=[];for(;s<this.e;){const e=this.start.plus(t.mapUnits(e=>e*i));n=+e>+this.e?this.e:e,a.push(r.fromDateTimes(s,n)),s=n,i+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e}equals(e){return!!this.isValid&&!!e.isValid&&this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:r.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return r.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort((e,t)=>e.s-t.s).reduce(([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const s=[],o=e.map(e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}]),i=Array.prototype.concat(...o).sort((e,t)=>e.time-t.time);for(const e of i)n+="s"===e.type?1:-1,1===n?t=e.time:(t&&+t!=+e.time&&s.push(r.fromDateTimes(t,e.time)),t=null);return r.merge(s)}difference(...e){return r.xor([this].concat(e)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:$}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=ae,t={}){return this.isValid?u.create(this.s.loc.clone(t),e).formatInterval(this):$}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:$}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:$}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:$}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:$}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):o.invalid(this.invalidReason)}mapEndpoints(e){return r.fromDateTimes(e(this.s),e(this.e))}}class oe{static hasDST(e=c.defaultZone){const t=n.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return A.isValidZone(e)}static normalizeZone(e){return S(e,c.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||i.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||i.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||i.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null,outputCalendar:o="gregory"}={}){return(s||i.create(t,n,o)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null,outputCalendar:o="gregory"}={}){return(s||i.create(t,n,o)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null}={}){return(s||i.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null}={}){return(s||i.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return i.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return i.create(t,null,"gregory").eras(e)}static features(){return{relative:Qe(),localeWeek:Ge()}}}function wn(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=n(t)-n(e);return Math.floor(o.fromMillis(s).as("days"))}function _(e,t=e=>e){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);if(-1!==e[n].search(Ve.hanidec))t+=Nn.indexOf(e[n]);else for(const n in et){const[e,o]=et[n];s>=e&&s<=o&&(t+=s-e)}}return parseInt(t,10)}return t}(e))}}const pn=`[ ${String.fromCharCode(160)}]`,fn=new RegExp(pn,"g");function En(e){return e.replace(/\./g,"\\.?").replace(fn,pn)}function hn(e){return e.replace(/\./g,"").replace(fn," ").toLowerCase()}function y(e,t){return null===e?null:{regex:RegExp(e.map(En).join("|")),deser:([n])=>e.findIndex(e=>hn(n)===hn(e))+t}}function cn(e,t){return{regex:e,deser:([,e,t])=>ve(e,t),groups:t}}function je(e){return{regex:e,deser:([e])=>e}}const Fn={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Te=null;function on(e,t){return Array.prototype.concat(...e.map(e=>function(e,t){if(e.literal)return e;const n=nn(u.macroTokenToFormatOpts(e.val),t);return n==null||n.includes(void 0)?e:n}(e,t)))}class sn{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=on(u.parseFormat(t),e),this.units=this.tokens.map(t=>function(e,t){const c=j(t),s=j(t,"{2}"),f=j(t,"{3}"),m=j(t,"{4}"),r=j(t,"{6}"),n=j(t,"{1,2}"),a=j(t,"{1,3}"),l=j(t,"{1,6}"),d=j(t,"{1,9}"),u=j(t,"{2,4}"),h=j(t,"{4,6}"),i=e=>{return{regex:RegExp((t=e.val,t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},o=(o=>{if(e.literal)return i(o);switch(o.val){case"G":return y(t.eras("short"),0);case"GG":return y(t.eras("long"),0);case"y":return _(l);case"yy":case"kk":return _(u,Ze);case"yyyy":case"kkkk":return _(m);case"yyyyy":return _(h);case"yyyyyy":return _(r);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return _(n);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return _(s);case"MMM":return y(t.months("short",!0),1);case"MMMM":return y(t.months("long",!0),1);case"LLL":return y(t.months("short",!1),1);case"LLLL":return y(t.months("long",!1),1);case"o":case"S":return _(a);case"ooo":case"SSS":return _(f);case"u":return je(d);case"uu":return je(n);case"uuu":case"E":case"c":return _(c);case"a":return y(t.meridiems(),0);case"EEE":return y(t.weekdays("short",!1),1);case"EEEE":return y(t.weekdays("long",!1),1);case"ccc":return y(t.weekdays("short",!0),1);case"cccc":return y(t.weekdays("long",!0),1);case"Z":case"ZZ":return cn(new RegExp(`([+-]${n.source})(?::(${s.source}))?`),2);case"ZZZ":return cn(new RegExp(`([+-]${n.source})(${s.source})?`),2);case"z":return je(/[a-z_+-/]{1,256}?/i);case" ":return je(/[^\S\n\r]/);default:return i(o)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return o.token=e,o}(t,e)),this.disqualifyingUnit=this.units.find(e=>e.invalidReason),!this.disqualifyingUnit){const[e,t]=[`^${(n=this.units).map(e=>e.regex).reduce((e,t)=>`${e}(${t.source})`,"")}$`,n];this.regex=RegExp(e,"i"),this.handlers=t}var n}explainFromTokens(e){if(this.isValid){const[n,t]=function(e,t,n){const s=e.match(t);if(s){const t={};let e=1;for(const o in n)if(Y(n,o)){const i=n[o],a=i.groups?i.groups+1:1;!i.literal&&i.token&&(t[i.token.val[0]]=i.deser(s.slice(e,e+a))),e+=a}return[s,t]}return[s,{}]}(e,this.regex,this.handlers),[o,i,a]=t?function(e){let n,t=null;return s(e.z)||(t=A.create(e.z)),s(e.Z)||(t||(t=new h(e.Z)),n=e.Z),s(e.q)||(e.M=3*(e.q-1)+1),s(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),s(e.u)||(e.S=We(e.u)),[Object.keys(e).reduce((t,n)=>{const s=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return s&&(t[s]=e[n]),t},{}),t,n]}(t):[null,null,void 0];if(Y(t,"a")&&Y(t,"H"))throw new I("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:t,result:o,zone:i,specificOffset:a}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Ue(e,t,n){return new sn(e,n).explainFromTokens(t)}function nn(e,t){if(!e)return null;const s=u.create(t,e).dtFormatter((Te||(Te=n.fromMillis(1555555555555)),Te)),o=s.formatToParts(),i=s.resolvedOptions();return o.map(t=>function(e,t,n){const{type:o,value:i}=e;if("literal"===o){const e=/^\s+$/.test(i);return{literal:!e,val:e?" ":i}}const r=t[o];let a=o;"hour"===o&&(a=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let s=Fn[a];if("object"==typeof s&&(s=s[r]),s)return{literal:!1,val:s}}(t,e,i))}const xe="Invalid DateTime",tn=864e13;function Q(e){return new g("unsupported zone",`the zone "${e.name}" is not supported`)}function Oe(e){return null===e.weekData&&(e.weekData=ie(e.c)),e.weekData}function Re(e){return null===e.localWeekData&&(e.localWeekData=ie(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function N(e,t){const s={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new n({...s,...t,old:s})}function Gt(e,t,n){let o=e-60*t*1e3;const s=n.offset(o);if(t===s)return[o,t];o-=60*(s-t)*1e3;const i=n.offset(o);return s===i?[o,s]:[e-60*Math.min(s,i)*1e3,Math.max(s,i)]}function me(e,t){const n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function he(e,t,n){return Gt(pe(e),t,n)}function Ut(e,t){const c=e.o,s=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),l={...e.c,year:s,month:i,day:Math.min(e.c.day,fe(s,i))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},a=o.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),d=pe(l);let[n,r]=Gt(d,c,e.zone);return 0!==a&&(n+=a,r=e.zone.offset(n)),{ts:n,o:r}}function q(e,t,s,o,i,a){const{setZone:c,zone:r}=s;if(e&&0!==Object.keys(e).length||t){const i=t||r,o=n.fromObject(e,{...s,zone:i,specificOffset:a});return c?o:o.setZone(r)}return n.invalid(new g("unparsable",`the input "${i}" can't be parsed as ${o}`))}function ue(e,t,n=!0){return e.isValid?u.create(i.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Ie(e,t){const s=e.c.year>9999||e.c.year<0;let n="";return s&&e.c.year>=0&&(n+="+"),n+=l(e.c.year,s?6:4),t?(n+="-",n+=l(e.c.month),n+="-",n+=l(e.c.day)):(n+=l(e.c.month),n+=l(e.c.day)),n}function Bt(e,t,n,s,o,i){let a=l(e.c.hour);return t?(a+=":",a+=l(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(a+=":")):a+=l(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(a+=l(e.c.second),0===e.c.millisecond&&s||(a+=".",a+=l(e.c.millisecond,3))),o&&(e.isOffsetFixed&&0===e.offset&&!i?a+="Z":e.o<0?(a+="-",a+=l(Math.trunc(-e.o/60)),a+=":",a+=l(Math.trunc(-e.o%60))):(a+="+",a+=l(Math.trunc(e.o/60)),a+=":",a+=l(Math.trunc(e.o%60)))),i&&(a+="["+e.zone.ianaName+"]"),a}const It={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},xn={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Mn={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Ht=["year","month","day","hour","minute","second","millisecond"],ts=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ns=["year","ordinal","hour","minute","second","millisecond"];function Pt(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new qe(e);return t}(e)}}function zt(e,t){const o=S(t.zone,c.defaultZone);if(!o.isValid)return n.invalid(Q(o));const l=i.fromObject(t);let a,r;if(s(e.year))a=c.now();else{for(const t of Ht)s(e[t])&&(e[t]=It[t]);const t=yt(e)||ot(e);if(t)return n.invalid(t);const i=function(e){return ce[e]||(void 0===le&&(le=c.now()),ce[e]=e.offset(le)),ce[e]}(o);[a,r]=he(e,i,o)}return new n({ts:a,zone:o,loc:l,o:r})}function Ft(e,t,n){const a=!!s(n.round)||n.round,o=(e,s)=>(e=Le(e,a||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(e,s)),i=s=>n.calendary?t.hasSame(e,s)?0:t.startOf(s).diff(e.startOf(s),s).get(s):t.diff(e,s).get(s);if(n.unit)return o(i(n.unit),n.unit);for(const e of n.units){const t=i(e);if(Math.abs(t)>=1)return o(t,e)}return o(e>t?-0:0,n.units[n.units.length-1])}function Mt(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}let le,ce={};class n{constructor(e){const n=e.zone||c.defaultZone;let o=e.invalid||(Number.isNaN(e.ts)?new g("invalid input"):null)||(n.isValid?null:Q(n));this.ts=s(e.ts)?c.now():e.ts;let t=null,a=null;if(!o)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[t,a]=[e.old.c,e.old.o];else{const s=F(e.o)&&!e.old?e.o:n.offset(this.ts);t=me(this.ts,s),o=Number.isNaN(t.year)?new g("invalid input"):null,t=o?null:t,a=o?null:s}this._zone=n,this.loc=e.loc||i.create(),this.invalid=o,this.weekData=null,this.localWeekData=null,this.c=t,this.o=a,this.isLuxonDateTime=!0}static now(){return new n({})}static local(){const[e,t]=Mt(arguments),[n,s,o,i,a,r,c]=t;return zt({year:n,month:s,day:o,hour:i,minute:a,second:r,millisecond:c},e)}static utc(){const[e,t]=Mt(arguments),[n,s,o,i,a,r,c]=t;return e.zone=h.utcInstance,zt({year:n,month:s,day:o,hour:i,minute:a,second:r,millisecond:c},e)}static fromJSDate(e,t={}){const o=(a=e,"[object Date]"===Object.prototype.toString.call(a)?e.valueOf():NaN);var a;if(Number.isNaN(o))return n.invalid("invalid input");const s=S(t.zone,c.defaultZone);return s.isValid?new n({ts:o,zone:s,loc:i.fromObject(t)}):n.invalid(Q(s))}static fromMillis(e,t={}){if(F(e))return e<-tn||e>tn?n.invalid("Timestamp out of range"):new n({ts:e,zone:S(t.zone,c.defaultZone),loc:i.fromObject(t)});throw new d(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(F(e))return new n({ts:1e3*e,zone:S(t.zone,c.defaultZone),loc:i.fromObject(t)});throw new d("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const d=S(t.zone,c.defaultZone);if(!d.isValid)return n.invalid(Q(d));const C=i.fromObject(t),o=be(e,Pt),{minDaysInFirstWeek:v,startOfWeek:b}=Ot(o,C),y=c.now(),_=s(t.specificOffset)?d.offset(y):t.specificOffset,a=!s(o.ordinal),E=!s(o.year),w=!s(o.month)||!s(o.day),m=E||w,j=o.weekYear||o.weekNumber;if((m||a)&&j)throw new I("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(w&&a)throw new I("Can't mix ordinal dates with month/day");const g=j||o.weekday&&!m;let h,u,l=me(y,_);g?(h=ts,u=xn,l=ie(l,v,b)):a?(h=ns,u=Mn,l=ke(l)):(h=Ht,u=It);let O=!1;for(const e of h)s(o[e])?o[e]=O?u[e]:l[e]:O=!0;const k=g?function(e,t=4,n=1){const s=ge(e.weekYear),o=f(e.weekNumber,1,ee(e.weekYear,t,n)),i=f(e.weekday,1,7);return s?o?!i&&p("weekday",e.weekday):p("week",e.weekNumber):p("weekYear",e.weekYear)}(o,v,b):a?function(e){const t=ge(e.year),n=f(e.ordinal,1,V(e.year));return t?!n&&p("ordinal",e.ordinal):p("year",e.year)}(o):yt(o),x=k||ot(o);if(x)return n.invalid(x);const A=g?kt(o,v,b):a?xt(o):o,[M,F]=he(A,_,d),r=new n({ts:M,zone:d,o:F,loc:C});return o.weekday&&m&&e.weekday!==r.weekday?n.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${r.toISO()}`):r.isValid?r:n.invalid(r.invalid)}static fromISO(e,t={}){const[n,s]=function(e){return P(e,[Vn,en],[Bn,Pn],[In,Ln],[Hn,Dn])}(e);return q(n,s,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,s]=function(e){return P(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Yn,qn])}(e);return q(n,s,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,s]=function(e){return P(e,[Kn,Yt],[Un,Yt],[Wn,$n])}(e);return q(n,s,t,"HTTP",t)}static fromFormat(e,t,o={}){if(s(e)||s(t))throw new d("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:c=null}=o,l=i.fromOpts({locale:r,numberingSystem:c,defaultToEN:!0}),[u,h,m,a]=function(e,t,n){const{result:s,zone:o,specificOffset:i,invalidReason:a}=Ue(e,t,n);return[s,o,i,a]}(l,e,t);return a?n.invalid(a):q(u,h,o,`format ${t}`,e,m)}static fromString(e,t,s={}){return n.fromFormat(e,t,s)}static fromSQL(e,t={}){const[n,s]=function(e){return P(e,[Tn,en],[Cn,Sn])}(e);return q(n,s,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new d("need to specify a reason the DateTime is invalid");const s=e instanceof g?e:new g(e,t);if(c.throwOnInvalid)throw new Ss(s);return new n({invalid:s})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=nn(e,i.fromObject(t));return n?n.map(e=>e?e.val:null).join(""):null}static expandFormat(e,t={}){return on(u.parseFormat(e),i.fromObject(t)).map(e=>e.val).join("")}static resetCache(){le=void 0,ce={}}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Oe(this).weekYear:NaN}get weekNumber(){return this.isValid?Oe(this).weekNumber:NaN}get weekday(){return this.isValid?Oe(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Re(this).weekday:NaN}get localWeekNumber(){return this.isValid?Re(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Re(this).weekYear:NaN}get ordinal(){return this.isValid?ke(this.c).ordinal:NaN}get monthShort(){return this.isValid?oe.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?oe.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?oe.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?oe.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const a=864e5,t=6e4,e=pe(this.c),l=this.zone.offset(e-a),d=this.zone.offset(e+a),o=this.zone.offset(e-l*t),i=this.zone.offset(e-d*t);if(o===i)return[this];const r=e-o*t,c=e-i*t,n=me(r,o),s=me(c,i);return n.hour===s.hour&&n.minute===s.minute&&n.second===s.second&&n.millisecond===s.millisecond?[N(this,{ts:r}),N(this,{ts:c})]:[this]}get isInLeapYear(){return G(this.year)}get daysInMonth(){return fe(this.year,this.month)}get daysInYear(){return this.isValid?V(this.year):NaN}get weeksInWeekYear(){return this.isValid?ee(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ee(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:s}=u.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:s}}toUTC(e=0,t={}){return this.setZone(h.instance(e),t)}toLocal(){return this.setZone(c.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:s=!1}={}){if((e=S(e,c.defaultZone)).equals(this.zone))return this;if(e.isValid){let n=this.ts;if(t||s){const t=e.offset(this.ts),s=this.toObject();[n]=he(s,t,e)}return N(this,{ts:n,zone:e})}return n.invalid(Q(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){return N(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=be(e,Pt),{minDaysInFirstWeek:o,startOfWeek:i}=Ot(t,this.loc),c=!s(t.weekYear)||!s(t.weekNumber)||!s(t.weekday),a=!s(t.ordinal),l=!s(t.year),r=!s(t.month)||!s(t.day),d=l||r,u=t.weekYear||t.weekNumber;if((d||a)&&u)throw new I("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(r&&a)throw new I("Can't mix ordinal dates with month/day");let n;c?n=kt({...ie(this.c,o,i),...t},o,i):s(t.ordinal)?(n={...this.toObject(),...t},s(t.day)&&(n.day=Math.min(fe(n.year,n.month),n.day))):n=xt({...ke(this.c),...t});const[h,m]=he(n,this.o,this.zone);return N(this,{ts:h,o:m})}plus(e){return this.isValid?N(this,Ut(this,o.fromDurationLike(e))):this}minus(e){return this.isValid?N(this,Ut(this,o.fromDurationLike(e).negate())):this}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},s=o.normalizeUnit(e);switch(s){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0}if("weeks"===s)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===s){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?u.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):xe}toLocaleString(e=ae,t={}){return this.isValid?u.create(this.loc.clone(t),e).formatDateTime(this):xe}toLocaleParts(e={}){return this.isValid?u.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:s=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const a="extended"===e;let i=Ie(this,a);return i+="T",i+=Bt(this,a,t,n,s,o),i}toISODate({format:e="extended"}={}){return this.isValid?Ie(this,"extended"===e):null}toISOWeekDate(){return ue(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:s=!1,extendedZone:o=!1,format:i="extended"}={}){return this.isValid?(s?"T":"")+Bt(this,"extended"===i,t,e,n,o):null}toRFC2822(){return ue(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ue(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Ie(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let s="HH:mm:ss.SSS";return(t||e)&&(n&&(s+=" "),t?s+="z":e&&(s+="ZZ")),ue(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():xe}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return o.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},c=(s=t,Array.isArray(s)?s:[s]).map(o.normalizeUnit),i=e.valueOf()>this.valueOf(),a=function(e,t,n,s){let[i,r,a,c]=function(e,t,n){const r=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=wn(e,t);return(n-n%7)/7}],["days",wn]],s={},i=e;let a,o;for(const[c,l]of r)n.indexOf(c)>=0&&(a=c,s[c]=l(e,t),o=i.plus(s),o>t?(s[c]--,(e=i.plus(s))>t&&(o=e,s[c]--,e=i.plus(s))):e=o);return[e,s,o,a]}(e,t,n);const d=t-i,l=n.filter(e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0);0===l.length&&(a<t&&(a=i.plus({[c]:1})),a!==i&&(r[c]=(r[c]||0)+d/(a-i)));const u=o.fromObject(r,s);return l.length>0?o.fromMillis(d,s).shiftTo(...l).plus(u):u}(i?this:e,i?e:this,c,r);var s;return i?a.negate():a}diffNow(e="milliseconds",t={}){return this.diff(n.now(),e,t)}until(e){return this.isValid?r.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const s=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(t,n)<=s&&s<=o.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||n.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(s=e.unit,o=void 0),Ft(t,this.plus(i),{...e,numeric:"always",units:s,unit:o})}toRelativeCalendar(e={}){return this.isValid?Ft(e.base||n.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(n.isDateTime))throw new d("min requires all arguments be DateTimes");return Ye(e,e=>e.valueOf(),Math.min)}static max(...e){if(!e.every(n.isDateTime))throw new d("max requires all arguments be DateTimes");return Ye(e,e=>e.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:s=null,numberingSystem:o=null}=n;return Ue(i.fromOpts({locale:s,numberingSystem:o,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,s={}){return n.fromFormatExplain(e,t,s)}static buildFormatParser(e,t={}){const{locale:n=null,numberingSystem:s=null}=t,o=i.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return new sn(o,e)}static fromFormatParser(e,t,o={}){if(s(e)||s(t))throw new d("fromFormatParser requires an input string and a format parser");const{locale:c=null,numberingSystem:l=null}=o,a=i.fromOpts({locale:c,numberingSystem:l,defaultToEN:!0});if(!a.equals(t.locale))throw new d(`fromFormatParser called with a locale of ${a}, but the format parser was created for ${t.locale}`);const{result:u,zone:h,specificOffset:m,invalidReason:r}=t.explainFromTokens(e);return r?n.invalid(r):q(u,h,o,`format ${t.format}`,e,m)}static get DATE_SHORT(){return ae}static get DATE_MED(){return nt}static get DATE_MED_WITH_WEEKDAY(){return js}static get DATE_FULL(){return it}static get DATE_HUGE(){return rt}static get TIME_SIMPLE(){return ut}static get TIME_WITH_SECONDS(){return pt}static get TIME_WITH_SHORT_OFFSET(){return gt}static get TIME_WITH_LONG_OFFSET(){return Ke}static get TIME_24_SIMPLE(){return Xt}static get TIME_24_WITH_SECONDS(){return Jt}static get TIME_24_WITH_SHORT_OFFSET(){return un}static get TIME_24_WITH_LONG_OFFSET(){return On}static get DATETIME_SHORT(){return _n}static get DATETIME_SHORT_WITH_SECONDS(){return yn}static get DATETIME_MED(){return jn}static get DATETIME_MED_WITH_SECONDS(){return bn}static get DATETIME_MED_WITH_WEEKDAY(){return Xn}static get DATETIME_FULL(){return mn}static get DATETIME_FULL_WITH_SECONDS(){return Rt}static get DATETIME_HUGE(){return Lt}static get DATETIME_HUGE_WITH_SECONDS(){return Nt}}function Z(e){if(n.isDateTime(e))return e;if(e&&e.valueOf&&F(e.valueOf()))return n.fromJSDate(e);if(e&&"object"==typeof e)return n.fromObject(e);throw new d(`Unknown datetime argument: ${e}, of type ${typeof e}`)}class hs{constructor({window:e}){this.window=e,this.document=e.document,this.root=this.document.getElementsByTagName("main")[0],this.promo=this.document.getElementById("discovered-promo"),this.redeem=this.document.getElementById("discovered-redeem")}renderDiscovery({code:e,link:t,title:n}){const s=this.document.createElement("div");s.classList.add("promo-discovery-wrapper"),s.appendChild(this.#e({link:t,title:n})),s.appendChild(this.#t({code:e})),this.root.appendChild(s)}renderPromo({discoveries:e,promo:t}){this.promo.appendChild(this.document.createElement("div")),this.#n({discoveries:e,promo:t}),this.promoIntervalTimer=this.window.setInterval(()=>{this.#n({discoveries:e,promo:t})},1e3)}renderRedeemPromo({promo:e}){this.redeem.appendChild(this.document.createElement("div")),this.#s({promo:e}),this.redeemIntervalTimer=this.window.setInterval(()=>{this.#s({promo:e})},1e3)}#e({link:e,title:t}){const n=this.document.createElement("div");n.classList.add("promo-discovery-message-wrapper");const i=this.document.createElement("h2");i.textContent="Congratulations!";const a=this.document.createElement("p");a.textContent="You discovered a daily Promo Code letter!";const o=this.document.createElement("a");o.textContent=t,o.href=e;const s=this.document.createElement("p");return s.appendChild(this.document.createTextNode("Visit the ")),s.appendChild(o),s.appendChild(this.document.createTextNode(" post for next steps, and to see the other letters you have discovered.")),n.appendChild(i),n.appendChild(a),n.appendChild(s),n}#t({code:e}){const t=this.document.createElement("div");t.classList.add("promo-discovery");const s=this.document.createElement("img");s.src="/fankit/Misc Icons/button_global_skilltree_node_epic_available.png";const n=this.document.createElement("p");return n.textContent=String.fromCharCode(e),n.classList.add("st-text-outline"),t.appendChild(s),t.appendChild(n),t}#n({discoveries:e,promo:t}){const s=t.active.start,i=t.redeemable.end,o=n.utc().toMillis(),a=i.toMillis()<o,r=s.toMillis()<o;if(a)return this.promoIntervalTimer&&this.window.clearInterval(this.promoIntervalTimer),void this.#r({end:t.redeemable.end});if(r){const s=this.document.createElement("div");s.classList.add("promo-game-wrapper");const o=this.document.createElement("h2");o.textContent="How it works";const i=this.document.createElement("p"),a=this.document.createElement("p"),r=this.document.createElement("p"),c=this.document.createElement("strong");i.textContent=`Browse the site each day from now through ${t.active.end.toLocaleString(n.DATE_HUGE)} to discover promo code characters.`,a.textContent="The event is designed so the entire code will not be revealed to any 1 player. You will need to share what you discover with your guild or other members of the community to uncover the entire code.",c.textContent="Please, use spoiler tags though so you don't ruin it for people that want to go it alone.";const l=this.document.createElement("h2");l.textContent="What you can earn";const d=this.document.createElement("p");d.textContent="The promo code can be redeemed by any player lv20 and above, for the following in-game prizes.";const u=this.document.createElement("ul");t.prize.forEach(e=>{const t=this.document.createElement("li");t.textContent=e,u.appendChild(t)}),r.appendChild(c),s.appendChild(o),s.appendChild(i),s.appendChild(a),s.appendChild(r),s.appendChild(l),s.appendChild(d),s.appendChild(u);const h=this.#i({discoveries:e,promo:t});s.appendChild(h),this.promo.replaceChild(s,this.promo.lastChild)}else{const e=this.document.createElement("div");e.classList.add("promo-game-wrapper");const t=this.document.createElement("p");t.textContent="STC Hub is celebrating its 2nd anniversary with a special community event, and in-game prizes for everyone merchant lv20 and above.";const n=this.document.createElement("h2");n.textContent="Event will start in",e.appendChild(t),e.appendChild(n),this.#a({message:e,root:this.promo,start:s})}}#s({promo:e}){const r=e.active.start,s=e.redeemable.start,o=e.redeemable.end,t=n.utc().toMillis(),c=o.toMillis()<t,i=s.toMillis()<t,a=r.toMillis()<t;if(c)return this.redeemIntervalTimer&&this.window.clearInterval(this.redeemIntervalTimer),void this.redeem.replaceChild(this.document.createElement("div"),this.redeem.lastChild);if(a&&!i){const e=this.document.createDocumentFragment(),t=this.document.createElement("h2"),n=this.document.createElement("h3");return t.textContent="Think you have it figured out?",n.textContent="Check back to redeem the code when it becomes active in",e.appendChild(t),e.appendChild(n),void this.#a({message:e,root:this.redeem,start:s})}if(a&&i){const t=this.document.createDocumentFragment(),s=this.document.createElement("h2");s.textContent="Think you have it figured out?";const n=this.document.createElement("a");n.textContent="Shop Titans Promo Code page",n.href="https://playshoptitans.com/promocode";const e=this.document.createElement("h3");e.appendChild(this.document.createTextNode("Redeem the code in-game, or on the ")),e.appendChild(n),e.appendChild(this.document.createTextNode(" before the code expires in")),t.appendChild(s),t.appendChild(e),this.#a({message:t,root:this.redeem,start:o})}}#r({end:e}){if(e.toMillis()<n.utc().toMillis()){const e=this.document.createElement("div"),t=this.document.createElement("h2");t.textContent="THIS EVENT HAS ENDED!",e.appendChild(t),this.promo.replaceChild(e,this.promo.lastChild)}}#a({start:e,message:t,root:s}){const o=n.utc();if(e.toMillis()>o){const n=this.document.createElement("div");n.classList.add("promo-countdown-wrapper"),n.appendChild(t);const o=this.#o({endTime:e});n.appendChild(o),s.replaceChild(n,s.lastChild)}}#o({endTime:e}){const t=this.document.createElement("div");t.classList.add("promo-countdown-timer-wrapper");const s=["days","hours","minutes","seconds","milliseconds"],o=e.diff(n.utc(),s);let i=!1;return s.filter(e=>"milliseconds"!==e).map(e=>{let t=-1;return(i||o[e]>0||"seconds"===e)&&(t=o[e].toString().padStart("days"===e?3:2,"0"),i=!0),{ticks:t,unit:e}}).forEach(e=>{if(-1!==e.ticks){const n=this.document.createElement("div");n.classList.add("promo-countdown-timer");const s=this.document.createElement("p");s.classList.add("st-text-outline"),s.textContent=e.ticks;const o=this.document.createElement("p");o.classList.add("st-text-outline"),o.textContent=`${e.unit[0].toUpperCase()}${e.unit.slice(1)}`,n.appendChild(s),n.appendChild(o),t.appendChild(n)}}),t}#i({discoveries:e,promo:t}){const n=this.document.createElement("div");return n.classList.add("promo-code-wrapper"),t.value.sort((e,t)=>Number([...e].splice(3,2).join(""))>Number([...t].splice(3,2).join(""))?1:-1).map(t=>e.map(e=>e.code).find(e=>e===Number([...t].splice(5,2).join("")))??32).forEach(e=>{const t=this.document.createElement("p");t.classList.add("st-text-outline"),t.classList.add(32===e?"promo-code-undiscovered":"promo-code-discovered"),t.textContent=String.fromCharCode(e),n.appendChild(t)}),n}}class ft{static LANGUAGES=["en","fr","es","de","it","pt","ru","tk","zh","zh_tr","ja","ko","uk"];static getLocale({window:e}){let t=e.location.pathname.split("/")[1];return ft.LANGUAGES.includes(t)||(t="en"),"zh_tr"===t&&(t="zh-Hant"),t}}class a{static LOCAL="localStorage";static SESSION="sessionStorage";static STORAGE_KEYS={PAGE_VIEWS:"pageViews",PROMOS:"promos",SHOP:"shop",TALENTS:"talents",USE_LOCAL_STORAGE:"useLocalStorage"};constructor({window:e}){this.window=e}save({key:e,value:t,storageType:n}){n!==a.LOCAL&&n!==a.SESSION||this.window[n].setItem(e,t)}load({key:e,storageType:t}){return this.window[t].getItem(e)??""}clearData(){this.window[a.LOCAL].clear(),this.window[a.SESSION].clear()}isStorageAvailable(e){if(e!==a.LOCAL&&e!==a.SESSION)return!1;let t=null;try{t=this.window[e];const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){const n={firefox:1014,notFirefox:22};return e instanceof this.window.DOMException&&(e.code===n.notFirefox||e.code===n.firefox||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}}class ps{constructor({pathname:e,storage:t,storageType:n}){this.page=e,this.pageViews={},this.storage=t,this.storageType=n}onLoad(){const e=this.storage.load({key:a.STORAGE_KEYS.PAGE_VIEWS,storageType:this.storageType});if(""!==e){const t=JSON.parse(e);this.pageViews=Object.keys(t).reduce((e,s)=>({...e,[s]:n.fromMillis(t[s],{zone:"utc"})}),{})}}recordPageView(){const e=n.utc(),t=this.pageViews[this.page]??n.fromMillis(0,{zone:"utc"});return e.diff(t,"hours").hours>1&&(this.pageViews[this.page]=e,this.#l(),!0)}#l(){const e=Object.keys(this.pageViews).reduce((e,t)=>({...e,[t]:this.pageViews[t].toMillis()}),{});this.storage.save({key:a.STORAGE_KEYS.PAGE_VIEWS,storageType:this.storageType,value:JSON.stringify(e)})}}class C{static PROMOS={STCHUB2Y:{active:r.fromDateTimes(n.utc(2025,1,1),n.utc(2025,1,9).minus(1)),code:[[65,70,79],[67,84,85],[51,72,89],[55,66,68],[49,83]],key:"stchub2y",link:"/posts/stc-hub-2-year-anniversary",prize:["48 Dragon Marks","55 Ascension Shards","42 Research Scrolls"],redeemable:r.fromDateTimes(n.utc(2025,1,7),n.utc(2025,1,10).minus(1)),title:"STC Hub: Two Years On",value:["#4F0783","#450349","#460879","#410468","#211566","#320155","#431184","#530689","#481267","#551372","#520565","#530970","#421485","#590251","#541083"]}};constructor(){this.discoveries={},Object.values(C.PROMOS).forEach(e=>{this.discoveries[e.key]=[]})}static findActivePromo({now:e}){const t=Object.values(C.PROMOS).find(t=>t.active.contains(e));return t?.key??""}hasDiscoveredDailyCode({now:e,promoKey:t}){const n=this.discoveries[t].find(t=>t.date===e.toISODate());return Boolean(n)}getTodaysAvailableCodes({now:e,promoKey:t}){const s=C.PROMOS[t.toUpperCase()],o=this.discoveries[t].map(e=>e.code),i=n.fromISO(e.toISODate(),{zone:"utc"}).diff(s.active.start,"days").days;return s.code[i%s.code.length].filter(e=>!o.includes(e))}rollCode({now:e,promoKey:t}){if(Math.random()<.9)return-1;const n=this.getTodaysAvailableCodes({now:e,promoKey:t});if(0===n.length)return-1;let s=1;const o=Math.random();for(;o>s*(1/n.length);)s+=1;return n[(s-1)%n.length]}}class vs{constructor({discovery:e,pageViewManager:t,promo:n,storage:s,storageType:o,window:i}){this.storage=s,this.storageType=o,this.window=i,this.discovery=e,this.pageViewManager=t,this.promo=n}onLoad(){const e=this.storage.load({key:a.STORAGE_KEYS.PROMOS,storageType:this.storageType});""!==e&&(this.promo.discoveries=JSON.parse(e))}rollCode(){const t=n.utc(),e=this.pageViewManager.recordPageView()?C.findActivePromo({now:t}):"";if(e&&!this.promo.hasDiscoveredDailyCode({now:t,promoKey:e})){const n=this.promo.rollCode({now:t,promoKey:e});-1!==n&&(this.promo.discoveries[e].push({code:n,date:t.toISODate()}),this.#u(),this.discovery.renderDiscovery({code:n,link:C.PROMOS[e.toUpperCase()].link,title:C.PROMOS[e.toUpperCase()].title}))}}showPromo({promo:e}){const t=e.key;this.discovery.renderPromo({discoveries:this.promo.discoveries[t],promo:e})}showRedeemPromo({promo:e}){this.discovery.renderRedeemPromo({promo:e})}#u(){this.storage.save({key:a.STORAGE_KEYS.PROMOS,storageType:this.storageType,value:JSON.stringify(this.promo.discoveries)})}}class J{static STORAGE_MODE_TOGGLEBOX_ID="storage-mode-togglebox";constructor({window:e,popup:t,storage:n}){this.document=e.document,this.popup=t,this.popupId="",this.storage=n,this.storageType=a.SESSION}saveSetting({id:e}){if(e===J.STORAGE_MODE_TOGGLEBOX_ID){const t=this.document.getElementById(e).checked;this.storage.save({key:a.STORAGE_KEYS.USE_LOCAL_STORAGE,storageType:a.LOCAL,value:t})}}load(){const e=this.#c({elementId:J.STORAGE_MODE_TOGGLEBOX_ID,key:a.STORAGE_KEYS.USE_LOCAL_STORAGE});this.storageType=e?a.LOCAL:a.SESSION}onClickToggleSettingsPopup({event:e,id:t}){t?(this.popupId=t,this.popup.open({popupId:this.popupId})):this.popupId&&e.target===this.document.getElementById(this.popupId)&&(this.popup.close({popupId:this.popupId}),this.popupId="")}#c({elementId:e,key:t}){const s=this.storage.load({key:t,storageType:a.LOCAL}),n=this.document.getElementById(e);return s.match(/true/iu)?n.checked=!0:s.match(/false/iu)&&(n.checked=!1),n.checked}}class t{static LIMITS={COUNTER_ENERGY:32,FURNITURE:{LEVEL:{max:25,min:1},QUANTITY:{COUNTER:{max:1,min:1},TRUNKS:{max:5,min:0},max:87,min:0}},PERKS:{RACK_ENERGY_LEVEL:{max:7,min:0}}};static FURNITURE_TYPES={BAR_ID:"furniture-bar",COUNTER:{BAR:{color:"#FF1F00",id:"counter-bar"},TYPES:["counter"]},RACKS:{BAR:{color:"#F3CA00",id:"rack-bar"},TYPES:["mannequins","shelves","tables","verticalracks"]},RSS:{BAR:{color:"#40FF72",id:"bin-bar"},T1:["ironBin","woodBin","leatherBin","herbBin"],T2:["steelBin","ironwoodBin","fabricBin","oilBin"],T3:["etherBin","jewelBin"],T4:["essenceBin"]},TRUNKS:{BAR:{color:"#9000FF",id:"trunk-bar"},TYPES:["trunks"]}};static PERK_TYPES={ENERGY:["mannequinsPerkLevel","shelvesPerkLevel","tablesPerkLevel","verticalracksPerkLevel"]};constructor(){this.furniture={counter:[{level:1,quantity:1}],essenceBin:[{level:1,quantity:0}],etherBin:[{level:1,quantity:0}],fabricBin:[{level:1,quantity:0}],herbBin:[{level:1,quantity:0}],ironBin:[{level:1,quantity:0}],ironwoodBin:[{level:1,quantity:0}],jewelBin:[{level:1,quantity:0}],leatherBin:[{level:1,quantity:0}],mannequins:[{level:1,quantity:0}],oilBin:[{level:1,quantity:0}],shelves:[{level:1,quantity:0}],steelBin:[{level:1,quantity:0}],tables:[{level:1,quantity:0}],trunks:[{level:1,quantity:0}],verticalracks:[{level:1,quantity:0}],woodBin:[{level:1,quantity:0}]},this.guildPerks={mannequinsPerkLevel:0,shelvesPerkLevel:0,tablesPerkLevel:0,verticalracksPerkLevel:0}}loadShop({shopObject:e}){this.#d({shopObj:e}),this.#h({shopObj:e})}#d({shopObj:e}){const{guildPerks:t}=this;if(e.guildPerks){const n=e.guildPerks;t.mannequinsPerkLevel=n.mannequinsPerkLevel??t.mannequinsPerkLevel,t.shelvesPerkLevel=n.shelvesPerkLevel??t.shelvesPerkLevel,t.tablesPerkLevel=n.tablesPerkLevel??t.tablesPerkLevel,t.verticalracksPerkLevel=n.verticalracksPerkLevel??t.verticalracksPerkLevel}}#h({shopObj:e}){const{furniture:t}=this;if(e.furniture){const n=e.furniture;t.counter=n.counter??t.counter,t.essenceBin=n.essenceBin??t.essenceBin,t.etherBin=n.etherBin??t.etherBin,t.fabricBin=n.fabricBin??t.fabricBin,t.herbBin=n.herbBin??t.herbBin,t.ironBin=n.ironBin??t.ironBin,t.ironwoodBin=n.ironwoodBin??t.ironwoodBin,t.jewelBin=n.jewelBin??t.jewelBin,t.leatherBin=n.leatherBin??t.leatherBin,t.mannequins=n.mannequins??t.mannequins,t.oilBin=n.oilBin??t.oilBin,t.shelves=n.shelves??t.shelves,t.steelBin=n.steelBin??t.steelBin,t.tables=n.tables??t.tables,t.verticalracks=n.verticalracks??t.verticalracks,t.woodBin=n.woodBin??t.woodBin,n.trunks&&(n.trunks.length>1||n.trunks[0]&&n.trunks[0].quantity>0)&&(t.trunks=n.trunks)}}}class ys{constructor({barId:e,document:t,slices:n}){this.barElement=t.getElementById(e),this.barSummaryElement=t.getElementById(`${e}-summary`),this.document=t,this.segments={},this.slices=n,this.usedSlices=0}addSegment({id:e,name:t,value:n,color:s}){this.segments[e]={color:s,name:t,value:n},this.usedSlices+=n,this.#m({id:e,isDeleted:!1}),this.#f()}updateSegmentValue({id:e,value:t}){this.segments[e]&&(this.usedSlices=this.usedSlices-this.segments[e].value+t,this.segments[e].value=t,this.#m({id:e,isDeleted:!1}),this.#f())}removeSegment({id:e}){this.segments[e]&&(this.usedSlices-=this.segments[e].value,delete this.segments[e],this.#m({id:e,isDeleted:!0}),this.#f())}#m({id:e,isDeleted:t}){let n=this.document.getElementById(e);if(t)n&&this.barElement.removeChild(n);else{const t=this.segments[e];n||(n=this.document.createElement("div"),n.id=e,n.style.backgroundColor=t.color),n.title=`${t.name}: ${t.value}`,n.style.width=t.value/this.slices*100+"%",this.barElement.appendChild(n)}}#f(){this.barSummaryElement.innerText=`${this.usedSlices} / ${this.slices}`}}class E{static hideAddButtonClass="furniture-table-hide-add-row";static roundBottomBorderCorners="furniture-table-tbody-is-last-row";constructor({document:e,shopManager:t}){this.document=e,this.shopManager=t}#y({name:e,placeholder:n,row:s}){const i=n.toLowerCase(),o=this.document.createElement("INPUT");return o.setAttribute("type","number"),o.setAttribute("name",e),o.setAttribute("placeholder",n),o.setAttribute("autocomplete",!1),o.setAttribute("min","level"===i?t.LIMITS.FURNITURE.LEVEL.min:t.LIMITS.FURNITURE.QUANTITY.min),o.setAttribute("max","level"===i?t.LIMITS.FURNITURE.LEVEL.max:t.LIMITS.FURNITURE.QUANTITY.max),o.setAttribute("value","level"===i?s.level:s.quantity),o.classList.add("furniture-table-input-spinner"),o.classList.add(`furniture-table-input-${i}`),o.onchange=e=>{const o={id:s.id},n=parseInt(e.target.value,10);"level"===i?isNaN(n)||n<t.LIMITS.FURNITURE.LEVEL.min?o.level=t.LIMITS.FURNITURE.LEVEL.min:n>t.LIMITS.FURNITURE.LEVEL.max?o.level=t.LIMITS.FURNITURE.LEVEL.max:o.level=n:isNaN(n)||n<t.LIMITS.FURNITURE.QUANTITY.min?o.quantity=t.LIMITS.FURNITURE.QUANTITY.min:n>t.LIMITS.FURNITURE.QUANTITY.max?o.quantity=t.LIMITS.FURNITURE.QUANTITY.max:o.quantity=n,this.shopManager.editFurniture(o)},o}#p({rowId:e}){const t=this.document.createElement("BUTTON");return t.appendChild(this.document.createTextNode("X")),t.onclick=()=>this.shopManager.removeFurniture({id:e}),t}static#g({rowElement:e,element:t}){e.insertCell(-1).appendChild(t)}addRow({id:e,level:n,quantity:s}){const o={id:e,level:n,quantity:s},i=this.document.getElementById(o.id.replace(/-\d+$/u,""));if(i){const e=i.insertRow(-1);e.id=o.id,i.rows.length>=t.LIMITS.FURNITURE.LEVEL.max&&(i.classList.add(E.roundBottomBorderCorners),i.nextElementSibling.classList.add(E.hideAddButtonClass));const n=this.#y({name:"level",placeholder:"Level",row:o}),s=this.#y({name:"quantity",placeholder:"Quantity",row:o}),a=this.#p({rowId:o.id});E.#g({element:n,rowElement:e}),E.#g({element:s,rowElement:e}),E.#g({element:a,rowElement:e})}}deleteRow({rowId:e}){const n=this.document.getElementById(e),t=this.document.getElementById(e.replace(/-\d+$/u,""));if(!n||!t||n===t)return;const s=t.nextElementSibling;s.classList.contains(E.hideAddButtonClass)&&(t.classList.remove(E.roundBottomBorderCorners),s.classList.remove(E.hideAddButtonClass)),t.deleteRow(n.rowIndex-1)}loadGuildPerk({id:e,level:t}){this.document.getElementById(e).value=t}}class D{#w={};#T="en";constructor({document:e,locale:t}){this.#w=e,this.#T=t,this.mannequinsEnergy=0,this.shelvesEnergy=0,this.tablesEnergy=0,this.verticalracksEnergy=0,this.mannequinsPerkEnergy=0,this.shelvesPerkEnergy=0,this.tablesPerkEnergy=0,this.verticalracksPerkEnergy=0,this.rackEnergy=0,this.perkEnergy=0,this.talentEnergy=0,this.energy=0}calculateShopEnergy({shop:e,talents:n}){this.rackEnergy=0,this.perkEnergy=0,t.FURNITURE_TYPES.RACKS.TYPES.forEach(n=>{const s=`${n}Energy`,o=t.PERK_TYPES.ENERGY.find(e=>e.replace(/PerkLevel$/u,"")===n),i=o.replace(/Level$/u,"Energy");this[s]=e.furniture[n].reduce(D.#v,0),this[i]=D.#S(e.furniture[n],e.guildPerks[o]),this.rackEnergy+=this[s],this.perkEnergy+=this[i]});const i=D.#E(e.furniture.counter[0].level),a=D.#k(n.bartering.energetic.level),r=D.#I(n.bartering.hyper.level),s=(t.LIMITS.COUNTER_ENERGY+this.rackEnergy+this.perkEnergy)*i,o=(s+a)*r;this.talentEnergy=Math.round(o-s),this.energy=Math.floor(o)}setInputLevel({id:e,level:t,max:n,min:s}){const o=this.#w.getElementById(e);o&&(o.max=n,o.min=s,o.value=t)}setEnergyElements(){this.#w.getElementById("mannequins-energy").innerText=this.mannequinsEnergy.toLocaleString(this.#T),this.#w.getElementById("mannequins-perk-energy").innerText=this.mannequinsPerkEnergy.toLocaleString(this.#T),this.#w.getElementById("shelves-energy").innerText=this.shelvesEnergy.toLocaleString(this.#T),this.#w.getElementById("shelves-perk-energy").innerText=this.shelvesPerkEnergy.toLocaleString(this.#T),this.#w.getElementById("tables-energy").innerText=this.tablesEnergy.toLocaleString(this.#T),this.#w.getElementById("tables-perk-energy").innerText=this.tablesPerkEnergy.toLocaleString(this.#T),this.#w.getElementById("verticalracks-energy").innerText=this.verticalracksEnergy.toLocaleString(this.#T),this.#w.getElementById("verticalracks-perk-energy").innerText=this.verticalracksPerkEnergy.toLocaleString(this.#T),this.#w.getElementById("shop-rack-energy").innerText=this.rackEnergy.toLocaleString(this.#T),this.#w.getElementById("shop-perk-energy").innerText=this.perkEnergy.toLocaleString(this.#T),this.#w.getElementById("shop-talent-energy").innerText=this.talentEnergy.toLocaleString(this.#T),this.#w.getElementById("shop-energy").innerText=this.energy.toLocaleString(this.#T)}static#v(e,t){return e+D.#b(t.level)*t.quantity}static#S(e,t){return e.reduce((e,t)=>e+t.quantity,0)*t*2}static#E(e){let t=1;switch(e){case 16:t=1.01;break;case 17:t=1.02;break;case 18:t=1.03;break;case 19:t=1.04;break;case 20:t=1.05;break;case 21:t=1.06;break;case 22:t=1.07;break;case 23:t=1.08;break;case 24:t=1.09;break;case 25:t=1.1}return t}static#b(e){let t=9;switch(e){case 2:t=12;break;case 3:t=15;break;case 4:t=18;break;case 5:t=21;break;case 6:t=24;break;case 7:t=30;break;case 8:t=36;break;case 9:t=42;break;case 10:t=48;break;case 11:t=54;break;case 12:t=63;break;case 13:t=72;break;case 14:t=81;break;case 15:t=90;break;case 16:t=99;break;case 17:t=110;break;case 18:t=121;break;case 19:t=132;break;case 20:t=143;break;case 21:t=154;break;case 22:t=166;break;case 23:t=178;break;case 24:t=190;break;case 25:t=202}return t}static#k(e){let t=0;switch(e){case 1:t=10;break;case 2:t=20;break;case 3:t=30;break;case 4:t=40;break;case 5:t=50}return t}static#I(e){let t=1;switch(e){case 1:t=1.02;break;case 2:t=1.04;break;case 3:t=1.06;break;case 4:t=1.08;break;case 5:t=1.1}return t}}class b{static LIMITS={BARTERING:{ENERGETIC:{max:5,min:0},HYPER:{max:5,min:0}}};static TALENTS={BARTERING:["bartering-energetic","bartering-hyper"]};constructor(){this.bartering={energetic:{level:b.LIMITS.BARTERING.ENERGETIC.min},hyper:{level:b.LIMITS.BARTERING.HYPER.min}}}loadTalents({talentObject:e}){this.#N({barteringTree:e.bartering})}#N({barteringTree:e}){e&&(this.bartering.energetic=e.energetic??this.bartering.energetic,this.bartering.hyper=e.hyper??this.bartering.hyper)}}class x{constructor({locale:e,shop:n,storage:s,storageType:o,talentManager:i,window:a}){this.shop=n,this.storage=s,this.storageType=o,this.talentManager=i,this.window=a;const r=t.LIMITS.FURNITURE.QUANTITY;this.furnitureBar=new ys({barId:t.FURNITURE_TYPES.BAR_ID,document:a.document,slices:r.max+r.COUNTER.min+r.TRUNKS.min}),this.furnitureTable=new E({document:a.document,shopManager:this}),this.shopEnergy=new D({document:a.document,locale:e})}onLoad(){const e=this.storage.load({key:a.STORAGE_KEYS.SHOP,storageType:this.storageType});if(""!==e){const t=JSON.parse(e);this.shop.loadShop({shopObject:t})}Object.keys(this.shop.furniture).forEach(e=>{x.#O(this.shop.furniture[e]),this.shop.furniture[e].forEach((t,n)=>{t.id||(t.id=`${e}-table-body-${n}`);const s={id:t.id,level:t.level,quantity:t.quantity};this.addFurniture(s)})}),Object.keys(this.shop.guildPerks).forEach(e=>{const t=e.replace(/PerkLevel$/u,"-perk-level");this.furnitureTable.loadGuildPerk({id:t,level:this.shop.guildPerks[e]})}),this.shopEnergy.setInputLevel({id:"counter-level",level:this.shop.furniture.counter[0].level,max:t.LIMITS.FURNITURE.LEVEL.max,min:t.LIMITS.FURNITURE.LEVEL.min}),this.shopEnergy.setInputLevel({id:b.TALENTS.BARTERING[0],level:this.talentManager.talents.bartering.energetic.level,max:b.LIMITS.BARTERING.ENERGETIC.max,min:b.LIMITS.BARTERING.ENERGETIC.min}),this.shopEnergy.setInputLevel({id:b.TALENTS.BARTERING[1],level:this.talentManager.talents.bartering.hyper.level,max:b.LIMITS.BARTERING.HYPER.max,min:b.LIMITS.BARTERING.HYPER.min}),this.#R(),this.#C()}addFurniture({id:e,level:t=1,quantity:n=0}){if(!x.#L({id:e}))return;const o={id:e,level:t,quantity:n},i=x.#M({id:e}),s=this.shop.furniture[i];if(!s.find(t=>t.id===e))if(e.match(/-\d+$/u))s.push(o);else{const t=s.map(e=>{const t=e.id.replace(/^.*-(?<index>\d+)$/u,"$<index>");return parseInt(t,10)}).sort((e,t)=>e-t).reduce((e,t,n,s)=>e<s.length?e:t!==n?n:e,s.length);o.id=`${e}-${t}`,s.push(o)}this.furnitureTable.addRow({...o})}removeFurniture({id:e}){if(!x.#L({id:e}))return;const n=x.#M({id:e}),s=this.shop.furniture[n],o=s.find(t=>t.id===e),i=s.indexOf(o);s.splice(i,1),this.#x(),this.#D({furnitureType:n}),this.furnitureTable.deleteRow({rowId:e}),t.FURNITURE_TYPES.RACKS.TYPES.includes(n)&&this.#R()}editFurniture({id:e,level:t=-1,quantity:n=-1}){if(!x.#L({id:e})&&!e.endsWith("-table-body"))return;const s=x.#M({id:e}),o=this.shop.furniture[s].find(t=>t.id===e);t>-1&&(o.level=t),n>-1&&(o.quantity=n,this.#D({furnitureType:s})),this.#x(),this.#R()}editPerk({id:e,value:n}){if(!x.#L({id:e}))return;const o=e.replace(/-perk-level$/u,"PerkLevel"),s=parseInt(n,10),i=t.LIMITS.PERKS.RACK_ENERGY_LEVEL.min,a=t.LIMITS.PERKS.RACK_ENERGY_LEVEL.max;isNaN(s)||s<i?this.shop.guildPerks[o]=i:this.shop.guildPerks[o]=s>a?a:s,this.#x(),this.#R()}editCounter({id:e,value:n}){if("counter-level"!==e)return;const o=this.shop.furniture.counter[0],s=parseInt(n,10),i=t.LIMITS.FURNITURE.LEVEL.min,a=t.LIMITS.FURNITURE.LEVEL.max;isNaN(s)||s<i?o.level=i:o.level=s>a?a:s,this.#x(),this.#R()}#x(){const e={...this.shop},n={};Object.keys(this.shop.furniture).forEach(e=>{n[e]=this.shop.furniture[e].reduce((e,n)=>{const o={level:n.level,quantity:n.quantity},s=e.find(e=>e.level===o.level);return s?(s.quantity+=o.quantity,s.quantity>t.LIMITS.FURNITURE.QUANTITY.max&&(s.quantity=t.LIMITS.FURNITURE.QUANTITY.max)):e.push(o),e},[])}),e.furniture=n,this.storage.save({key:a.STORAGE_KEYS.SHOP,storageType:this.storageType,value:JSON.stringify(e)})}#R(){this.shopEnergy.calculateShopEnergy({shop:this.shop,talents:this.talentManager.talents}),this.shopEnergy.setEnergyElements({window:this.window})}#C(){const s=this.shop.furniture.counter[0].quantity,o=this.shop.furniture.trunks.reduce((e,t)=>e+t.quantity,0);let e=0,n=0;t.FURNITURE_TYPES.RACKS.TYPES.forEach(t=>{e+=this.shop.furniture[t].reduce((e,t)=>e+t.quantity,0)}),[...t.FURNITURE_TYPES.RSS.T1,...t.FURNITURE_TYPES.RSS.T2,...t.FURNITURE_TYPES.RSS.T3,...t.FURNITURE_TYPES.RSS.T4].forEach(e=>{n+=this.shop.furniture[e].reduce((e,t)=>e+t.quantity,0)}),this.furnitureBar.addSegment({color:t.FURNITURE_TYPES.COUNTER.BAR.color,id:t.FURNITURE_TYPES.COUNTER.BAR.id,name:"Counter",value:s}),this.furnitureBar.addSegment({color:t.FURNITURE_TYPES.TRUNKS.BAR.color,id:t.FURNITURE_TYPES.TRUNKS.BAR.id,name:"Trunks",value:o}),this.furnitureBar.addSegment({color:t.FURNITURE_TYPES.RSS.BAR.color,id:t.FURNITURE_TYPES.RSS.BAR.id,name:"Bins",value:n}),this.furnitureBar.addSegment({color:t.FURNITURE_TYPES.RACKS.BAR.color,id:t.FURNITURE_TYPES.RACKS.BAR.id,name:"Racks",value:e})}#D({furnitureType:e}){const o=t.FURNITURE_TYPES.RACKS.TYPES,i=[...t.FURNITURE_TYPES.RSS.T1,...t.FURNITURE_TYPES.RSS.T2,...t.FURNITURE_TYPES.RSS.T3,...t.FURNITURE_TYPES.RSS.T4];let n="",s=0;o.includes(e)?(n=t.FURNITURE_TYPES.RACKS.BAR.id,t.FURNITURE_TYPES.RACKS.TYPES.forEach(e=>{s+=this.shop.furniture[e].reduce((e,t)=>e+t.quantity,0)})):i.includes(e)?(n=t.FURNITURE_TYPES.RSS.BAR.id,[...t.FURNITURE_TYPES.RSS.T1,...t.FURNITURE_TYPES.RSS.T2,...t.FURNITURE_TYPES.RSS.T3,...t.FURNITURE_TYPES.RSS.T4].forEach(e=>{s+=this.shop.furniture[e].reduce((e,t)=>e+t.quantity,0)})):"trunks"===e&&(n=t.FURNITURE_TYPES.TRUNKS.BAR.id,s=this.shop.furniture.trunks.reduce((e,t)=>e+t.quantity,0)),n&&this.furnitureBar.updateSegmentValue({id:n,value:s})}static#O(e){e.sort((e,t)=>e.level-t.level==0?e.quantity-t.quantity:t.level-e.level)}static#L({id:e}){const n=/-table-body-?\d*$|-perk-level$/u;if(e.match(n)){const s=e.replace(n,"");if([...t.FURNITURE_TYPES.COUNTER.TYPES,...t.FURNITURE_TYPES.TRUNKS.TYPES,...t.FURNITURE_TYPES.RACKS.TYPES,...t.FURNITURE_TYPES.RSS.T1,...t.FURNITURE_TYPES.RSS.T2,...t.FURNITURE_TYPES.RSS.T3,...t.FURNITURE_TYPES.RSS.T4].includes(s)||t.PERK_TYPES.ENERGY.includes(`${s}PerkLevel`))return!0}return!1}static#M({id:e}){return e.replace(/-table-body-?\d*$/u,"")}editTalent({id:e,value:t}){b.TALENTS.BARTERING.includes(e)&&(this.talentManager.updateTalent({id:e,level:parseInt(t,10)}),this.#R())}}class Cs{constructor({storage:e,storageType:t,talents:n,window:s}){this.talents=n,this.storage=e,this.storageType=t,this.window=s}onLoad(){const e=this.storage.load({key:a.STORAGE_KEYS.TALENTS,storageType:this.storageType});if(""!==e){const t=JSON.parse(e);this.talents.loadTalents({talentObject:t})}}updateTalent({id:e,level:t}){const[n,s]=e.split("-");if(!(n&&s&&this.talents[n]&&this.talents[n][s]))return;const i=b.LIMITS[n.toUpperCase()][s.toUpperCase()];let o=t;t<0?o=0:t>i&&(o=i),this.talents[n][s].level=o,this.#F()}#F(){this.storage.save({key:a.STORAGE_KEYS.TALENTS,storageType:this.storageType,value:JSON.stringify(this.talents)})}}const Es=new class{classes={popupActive:"popup-active"};constructor({window:e}){this.document=e.document}open({popupId:e}){this.document.getElementById(e).classList.add(this.classes.popupActive)}close({popupId:e}){this.document.getElementById(e).classList.remove(this.classes.popupActive)}}({window}),w=new a({window}),As=new class{classes={toggleboxActive:"togglebox-active",toggleboxInactive:"togglebox-inactive"};constructor({window:e}){this.document=e.document}click({id:e}){const s=this.document.getElementById(e),t=this.document.getElementById(`${e}-active`),n=this.document.getElementById(`${e}-inactive`);s.checked?(this.#U(t),this.#A(n)):(this.#U(n),this.#A(t))}#U(e){e&&(e.classList.add(this.classes.toggleboxActive),e.classList.remove(this.classes.toggleboxInactive))}#A(e){e&&(e.classList.remove(this.classes.toggleboxActive),e.classList.add(this.classes.toggleboxInactive))}}({window}),O=new J({popup:Es,storage:w,window});window.onClickToggleBox=e=>{As.click({id:e}),w.isStorageAvailable(a.LOCAL)&&O.saveSetting({id:e})},window.onClickClearStorage=()=>{w.clearData(),w.isStorageAvailable(a.LOCAL)&&O.saveSetting({id:J.STORAGE_MODE_TOGGLEBOX_ID})},window.onClickOpenSettings=e=>O.onClickToggleSettingsPopup({event:null,id:e}),window.onclick=e=>O.onClickToggleSettingsPopup({event:e,id:""}),window.onload=()=>{if(w.isStorageAvailable(a.LOCAL)&&(O.load(),window.onClickToggleBox(J.STORAGE_MODE_TOGGLEBOX_ID)),w.isStorageAvailable(O.storageType)){const e=window.location.pathname;e.match(/(?:\/\w{2}|\/\w{2}_\w{2})?\/tools\/shop-sim\//u)&&function(){const s=ft.getLocale({window}),e=new Cs({storage:w,storageType:O.storageType,talents:new b,window});e.onLoad();const n=new x({locale:s,shop:new t,storage:w,storageType:O.storageType,talentManager:e,window});n.onLoad(),window.shopManager=n}(),function(){const e=new ps({pathname:window.location.pathname,storage:w,storageType:O.storageType});e.onLoad();const t=new vs({discovery:new hs({window}),pageViewManager:e,promo:new C,storage:w,storageType:O.storageType,window});t.onLoad(),window.promoManager=t}(),e.match(/^(?:\/\w{2}|\/\w{2}_\w{2})?\/posts\/stc-hub-2-year-anniversary\//u)&&(window.promoManager.showPromo({promo:C.PROMOS.STCHUB2Y}),window.promoManager.showRedeemPromo({promo:C.PROMOS.STCHUB2Y})),e.match(/^(?:\/\w{2}|\/\w{2}_\w{2})?\/(?:impackts|posts|tools)\/page\//u)||e.match(/^(?:\/\w{2}|\/\w{2}_\w{2})?\/(?:authors|categories|tags)\//u)||e.match(/^(?:\/\w{2}|\/\w{2}_\w{2})?\/posts\/stc-hub-2-year-anniversary\//u)||(e.match(/^(?:\/\w{2}|\/\w{2}_\w{2})?\/impackts\/.+\//u)||e.match(/^(?:\/\w{2}|\/\w{2}_\w{2})?\/posts\/.+\//u)||e.match(/^(?:\/\w{2}|\/\w{2}_\w{2})?\/tools\/.+\//u))&&window.promoManager.rollCode()}}})()